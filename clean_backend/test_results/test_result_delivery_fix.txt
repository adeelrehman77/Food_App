============================= test session starts ==============================
platform darwin -- Python 3.14.2, pytest-7.4.4, pluggy-1.6.0
django: version: 4.2.28, settings: config.settings.test (from ini)
rootdir: /Users/adeelrehman/Food_App/clean_backend
configfile: pytest.ini
plugins: cov-4.1.0, Faker-40.4.0, django-4.11.1
collected 4 items

apps/delivery/tests/test_views.py ....                                   [100%]

=============================== warnings summary ===============================
.venv/lib/python3.14/site-packages/django/conf/__init__.py:289
  /Users/adeelrehman/Food_App/clean_backend/.venv/lib/python3.14/site-packages/django/conf/__init__.py:289: RemovedInDjango51Warning: The STATICFILES_STORAGE setting is deprecated. Use STORAGES instead.
    warnings.warn(STATICFILES_STORAGE_DEPRECATED_MSG, RemovedInDjango51Warning)

apps/delivery/tests/test_views.py::TestDeliveryViewSet::test_list_deliveries
apps/delivery/tests/test_views.py::TestDeliveryViewSet::test_list_deliveries
  /Users/adeelrehman/Food_App/clean_backend/.venv/lib/python3.14/site-packages/swagger_spec_validator/validator12.py:18: DeprecationWarning: jsonschema.RefResolver is deprecated as of v4.18.0, in favor of the https://github.com/python-jsonschema/referencing library, which provides more compliant referencing behavior as well as more flexible APIs for customization. A future release will remove RefResolver. Please file a feature request (on referencing) if you are missing an API for the kind of customization you need.
    from jsonschema import RefResolver

apps/delivery/tests/test_views.py::TestDeliveryViewSet::test_list_deliveries
  /Users/adeelrehman/Food_App/clean_backend/.venv/lib/python3.14/site-packages/swagger_spec_validator/ref_validators.py:14: DeprecationWarning: jsonschema.RefResolver is deprecated as of v4.18.0, in favor of the https://github.com/python-jsonschema/referencing library, which provides more compliant referencing behavior as well as more flexible APIs for customization. A future release will remove RefResolver. Please file a feature request (on referencing) if you are missing an API for the kind of customization you need.
    from jsonschema.validators import RefResolver

apps/delivery/tests/test_views.py::TestDeliveryViewSet::test_list_deliveries
  /Users/adeelrehman/Food_App/clean_backend/.venv/lib/python3.14/site-packages/swagger_spec_validator/validator20.py:18: DeprecationWarning: jsonschema.RefResolver is deprecated as of v4.18.0, in favor of the https://github.com/python-jsonschema/referencing library, which provides more compliant referencing behavior as well as more flexible APIs for customization. A future release will remove RefResolver. Please file a feature request (on referencing) if you are missing an API for the kind of customization you need.
    from jsonschema.validators import RefResolver

apps/delivery/tests/test_views.py::TestDeliveryViewSet::test_list_deliveries
  /Users/adeelrehman/Food_App/clean_backend/.venv/lib/python3.14/site-packages/drf_yasg/views.py:100: DeprecationWarning: SwaggerJSONRenderer & SwaggerYAMLRenderer's `format` has changed to not include a `.` prefix, please silence this warning by setting `SWAGGER_USE_COMPAT_RENDERERS = False` in your Django settings and ensure your application works (check your URLCONF and swagger/redoc URLs).
    warnings.warn(

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html

---------- coverage: platform darwin, python 3.14.2-final-0 ----------
Name                                                                                               Stmts   Miss  Cover   Missing
--------------------------------------------------------------------------------------------------------------------------------
apps/delivery/__init__.py                                                                              0      0   100%
apps/delivery/admin.py                                                                                 9      0   100%
apps/delivery/apps.py                                                                                  4      0   100%
apps/delivery/migrations/0001_initial.py                                                               7      0   100%
apps/delivery/migrations/0002_update_delivery_driver.py                                                6      0   100%
apps/delivery/migrations/__init__.py                                                                   0      0   100%
apps/delivery/models.py                                                                               22      6    73%   33, 38-42
apps/delivery/serializers.py                                                                          33      4    88%   31-32, 41, 48
apps/delivery/tests/__init__.py                                                                        0      0   100%
apps/delivery/tests/test_views.py                                                                     57      0   100%
apps/delivery/urls_api.py                                                                              7      0   100%
apps/delivery/views.py                                                                                62      3    95%   16, 20, 50
apps/driver/__init__.py                                                                                0      0   100%
apps/driver/admin.py                                                                                  35      0   100%
apps/driver/apps.py                                                                                    4      0   100%
apps/driver/migrations/0001_initial.py                                                                 7      0   100%
apps/driver/migrations/0002_deliveryassignment_deliverydriver_and_more.py                              7      0   100%
apps/driver/migrations/0003_add_zones_routes_to_deliverydriver.py                                      4      0   100%
apps/driver/migrations/0004_deliverydriver_user.py                                                     6      0   100%
apps/driver/migrations/__init__.py                                                                     0      0   100%
apps/driver/models.py                                                                                118     21    82%   27, 48, 96, 102-117, 123-132, 174, 201, 237, 276
apps/driver/permissions.py                                                                             8      2    75%   12, 16
apps/driver/serializers/__init__.py                                                                    2      0   100%
apps/driver/serializers/admin_serializers.py                                                          88     36    59%   25, 41, 84-126, 129-136
apps/driver/serializers/driver_serializers.py                                                         19      1    95%   12
apps/driver/urls.py                                                                                    4      0   100%
apps/driver/urls_api.py                                                                               12      0   100%
apps/driver/views/__init__.py                                                                          3      0   100%
apps/driver/views/admin_views.py                                                                      73     23    68%   33-35, 49-51, 65-68, 73-77, 82-86, 91-93
apps/driver/views/base.py                                                                              6      2    67%   5, 8
apps/driver/views/driver_views.py                                                                     40     27    32%   15-25, 29-46, 50-64
apps/inventory/__init__.py                                                                             0      0   100%
apps/inventory/admin.py                                                                               12      0   100%
apps/inventory/apps.py                                                                                 4      0   100%
apps/inventory/migrations/0001_initial.py                                                              6      0   100%
apps/inventory/migrations/0002_alter_inventoryitem_options_and_more.py                                 4      0   100%
apps/inventory/migrations/__init__.py                                                                  0      0   100%
apps/inventory/models.py                                                                              31      3    90%   22, 52, 56
apps/inventory/serializers.py                                                                         18      0   100%
apps/inventory/urls_api.py                                                                             8      0   100%
apps/inventory/views.py                                                                               43     15    65%   17, 21, 51-66, 71-75
apps/kitchen/__init__.py                                                                               0      0   100%
apps/kitchen/admin.py                                                                                 12      0   100%
apps/kitchen/apps.py                                                                                   4      0   100%
apps/kitchen/middleware.py                                                                             7      0   100%
apps/kitchen/migrations/0001_initial.py                                                                7      0   100%
apps/kitchen/migrations/__init__.py                                                                    0      0   100%
apps/kitchen/models.py                                                                                22      2    91%   15, 28
apps/kitchen/serializers.py                                                                           12      0   100%
apps/kitchen/urls.py                                                                                   4      0   100%
apps/kitchen/urls_api.py                                                                               7      0   100%
apps/kitchen/views.py                                                                                 61     38    38%   14, 18, 40-55, 60-68, 73-83, 88-110
apps/main/__init__.py                                                                                  0      0   100%
apps/main/admin.py                                                                                    55      0   100%
apps/main/apps.py                                                                                      4      0   100%
apps/main/management/__init__.py                                                                       0      0   100%
apps/main/migrations/0001_initial.py                                                                   7      0   100%
apps/main/migrations/0002_wallettransaction_address.py                                                 5      0   100%
apps/main/migrations/0003_customerprofile_notification_remove_customer_tenant_and_more.py              7      0   100%
apps/main/migrations/0004_customerregistrationrequest_invoice_invoiceitem_and_more.py                  8      0   100%
apps/main/migrations/0005_alter_menuitem_options_remove_customerprofile_tenant_and_more.py             5      0   100%
apps/main/migrations/0006_daily_menu_system.py                                                         6      0   100%
apps/main/migrations/0007_add_diet_type_and_meal_package.py                                            4      0   100%
apps/main/migrations/0008_fix_created_by_cross_db.py                                                   4      0   100%
apps/main/migrations/0009_revert_created_by_to_fk.py                                                   6      0   100%
apps/main/migrations/0010_subscription_diet_type.py                                                    4      0   100%
apps/main/migrations/0011_subscription_use_mealslot.py                                                 5      0   100%
apps/main/migrations/0012_mealpackage_menus_subscription_meal_package.py                               5      0   100%
apps/main/migrations/0013_invoice_number_optional.py                                                   4      0   100%
apps/main/migrations/0014_add_zone_to_address.py                                                       5      0   100%
apps/main/migrations/__init__.py                                                                       0      0   100%
apps/main/models.py                                                                                  500    161    68%   23-28, 40, 55, 136, 140, 184, 200, 232, 291, 296, 336, 341-343, 428-429, 485-489, 492-510, 513-524, 527-540, 543-556, 619, 626-628, 632-639, 657, 664, 666, 670, 674, 677, 680, 688, 691-715, 724-740, 749-772, 798, 802, 810-812, 823-824, 833, 836, 851, 854-858, 869, 887, 901, 904-922, 942, 954, 961
apps/main/serializers/__init__.py                                                                      3      0   100%
apps/main/serializers/admin_serializers.py                                                           495    258    48%   87, 90, 131-159, 185-187, 190-192, 195-263, 340-349, 378-380, 442-444, 456-458, 493-507, 510-514, 517-526, 530-532, 536, 561-565, 568-574, 601-605, 608-614, 628-630, 669, 672, 688-691, 694-699, 702-707, 710-715, 718-723, 741, 761-861, 865-871, 874-886, 889-902, 905
apps/main/serializers/customer_api_serializers.py                                                     56      9    84%   72-85
apps/main/serializers/customer_serializers.py                                                         49      5    90%   33-35, 56, 59
apps/main/urls.py                                                                                      4      0   100%
apps/main/urls_api.py                                                                                 23      0   100%
apps/main/urls_customer_api.py                                                                        12      0   100%
apps/main/utils/__init__.py                                                                            1      0   100%
apps/main/utils/validators.py                                                                         20     11    45%   5-7, 10, 13, 16-18, 21, 24, 27
apps/main/views/__init__.py                                                                            4      0   100%
apps/main/views/admin_views.py                                                                       405    262    35%   45-104, 155-157, 162-217, 232-234, 238-242, 262-301, 308-319, 332-334, 338, 345-348, 355-359, 378-383, 393-401, 424-426, 448, 451-453, 457-488, 496-504, 509-529, 546-548, 575-597, 600-604, 607-610, 617-632, 640-645, 653-656, 664-680, 701-703, 721-723, 741, 750-754, 758-764, 772-798, 807-816, 821-831, 836-843
apps/main/views/base.py                                                                               12      4    67%   7, 12, 19, 26
apps/main/views/customer_api_views.py                                                                131     68    48%   51-88, 110-135, 159-172, 179-181, 192, 205, 210-211, 224, 231-243, 261, 267-273, 278-292, 306, 319, 326-330, 335-338, 349, 352-353
apps/main/views/customer_views.py                                                                     40     12    70%   17-19, 35-37, 42-45, 63-64
apps/organizations/__init__.py                                                                         0      0   100%
apps/organizations/admin.py                                                                           28      0   100%
apps/organizations/apps.py                                                                             4      0   100%
apps/organizations/management/__init__.py                                                              0      0   100%
apps/organizations/migrations/0001_initial.py                                                          5      0   100%
apps/organizations/migrations/0002_rename_subscriptionplan_serviceplan.py                              4      0   100%
apps/organizations/migrations/0003_remove_serviceplan_max_orders_per_month.py                          4      0   100%
apps/organizations/migrations/0004_alter_serviceplan_options_serviceplan_description_and_more.py       6      0   100%
apps/organizations/migrations/0005_alter_serviceplan_max_customers_and_more.py                         4      0   100%
apps/organizations/migrations/__init__.py                                                              0      0   100%
apps/organizations/models.py                                                                          39     10    74%   75, 80-84, 91-95
apps/organizations/models_saas.py                                                                     76     16    79%   62, 66, 70, 74-76, 122, 125-135, 166
apps/organizations/serializers.py                                                                     80     15    81%   52-55, 75-78, 81-84, 96-98
apps/organizations/urls.py                                                                             3      0   100%
apps/organizations/urls_saas.py                                                                       10      0   100%
apps/organizations/views.py                                                                           20     12    40%   13-15, 18-39
apps/organizations/views_saas.py                                                                     179    119    34%   44, 82-88, 92-102, 106-128, 137-222, 228-248, 253-256, 261-270, 275-284, 310-314, 325-352
apps/users/__init__.py                                                                                 0      0   100%
apps/users/admin.py                                                                                   15      0   100%
apps/users/apps.py                                                                                     6      0   100%
apps/users/middleware.py                                                                              16      1    94%   27
apps/users/migrations/0001_initial.py                                                                  7      0   100%
apps/users/migrations/0002_rename_subscription_plan_tenant_service_plan.py                             4      0   100%
apps/users/migrations/0003_add_tenant_to_userprofile.py                                                5      0   100%
apps/users/migrations/__init__.py                                                                      0      0   100%
apps/users/models.py                                                                                  31      3    90%   21, 30, 49
apps/users/serializers.py                                                                              6      0   100%
apps/users/signals.py                                                                                 31     19    39%   24-70
apps/users/urls_api.py                                                                                 4      0   100%
apps/users/views.py                                                                                   35     21    40%   15-17, 21, 25, 34-59
config/__init__.py                                                                                     0      0   100%
config/asgi.py                                                                                         7      7     0%   10-19
config/settings/__init__.py                                                                            0      0   100%
config/settings/base.py                                                                              200     40    80%   32, 336-339, 348-349, 355-368, 467-470, 483, 509, 564-571, 580, 585-593, 599, 604-605, 649-650
config/settings/development.py                                                                        25     25     0%   1-63
config/settings/production.py                                                                         45     45     0%   1-85
config/settings/test.py                                                                               22      0   100%
config/url_patterns/__init__.py                                                                        0      0   100%
config/url_patterns/base.py                                                                           14     14     0%   1-57
config/urls.py                                                                                        13      2    85%   63-64
config/wsgi.py                                                                                         4      4     0%   10-16
core/__init__.py                                                                                       0      0   100%
core/db/router.py                                                                                     24      3    88%   58, 63, 75
core/middleware/__init__.py                                                                            3      0   100%
core/middleware/multi_db_tenant.py                                                                    38     13    66%   43, 46-77
core/middleware/performance.py                                                                       164     43    74%   26-27, 32-33, 43-44, 48-49, 53, 60, 101-102, 109, 115-147, 173, 189, 202, 229, 305-316
core/middleware/security.py                                                                          137     45    67%   44-55, 106, 112, 119, 126, 132, 138-144, 173-178, 182-186, 190-192, 197, 204, 206, 235, 252, 260, 264-277, 281-297
core/middleware/tenant.py                                                                             28     28     0%   1-52
core/monitoring/__init__.py                                                                           16     16     0%   2-32
core/permissions/__init__.py                                                                           2      0   100%
core/permissions/custom.py                                                                            74     40    46%   12-16, 25-34, 42, 54, 66, 78, 93-97, 106-110, 119-123, 132-136, 145-149, 157, 169, 181, 194-198, 207-215
core/permissions/plan_limits.py                                                                       48     21    56%   28-56, 64-65, 73-74, 82-83
core/tests/__init__.py                                                                                 0      0   100%
core/tests/test_middleware.py                                                                         31     31     0%   1-35
core/tests/test_validators.py                                                                         56     56     0%   1-76
core/utils/__init__.py                                                                                 0      0   100%
core/utils/validators.py                                                                             124    124     0%   1-215
create_tenant_user.py                                                                                 38     38     0%   1-57
fix_drivers.py                                                                                        58     58     0%   1-100
fix_tenant.py                                                                                         41     41     0%   5-56
manage.py                                                                                             11     11     0%   3-22
scripts/__init__.py                                                                                    0      0   100%
scripts/create_api_key.py                                                                             47     47     0%   14-87
scripts/fix_migrations.py                                                                             15     15     0%   1-20
scripts/inspect_db.py                                                                                 15     15     0%   1-17
scripts/provision_tenant.py                                                                           49     49     0%   1-98
scripts/reset_local_schema.py                                                                         29     29     0%   1-54
scripts/setup_database.py                                                                             45     45     0%   11-120
--------------------------------------------------------------------------------------------------------------------------------
TOTAL                                                                                               4839   2094    57%

======================== 4 passed, 6 warnings in 6.48s =========================
